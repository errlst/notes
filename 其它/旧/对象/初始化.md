[toc]

#### 初始化器

c++变量的初始化器有三种：

>   1.   `(表达式列表)`
>   2.   ` = 表达式`
>   3.   `{ 初始化器列表 }`

在初始化变量时如果提供了初始化器，将根据上下文产生[值初始化](#值初始化)、[直接初始化](#直接初始化)、[复制初始化](#复制初始化)、[列表初始化](#列表初始化)、[聚合初始化](#聚合初始化)和[引用初始化](#引用初始化)。

如果不提供初始化器，则会应用[默认初始化](#默认初始化)的规则。

#### 值初始化

以空初始化器构造对象。

值初始化可能在以下情况进行：

> 1. 以空的括号或花括号对组成的初始化器创建临时对象，如：`T()`、`T{}`、`new T()`、`new T{}`。
> 2. 以空的花括号对组成的初始化器创建具名对象，如`T t{}`。
>
> ---
>
> 任何情况下，如果使用空花括号对作为初始化器，且：
>
> *   如果T是聚合类型，且使用`{}`初始化器，那么进行[聚合初始化](#聚合初始化)。
> *   如果T没有默认构造函数，但有接受`std::initializer_list`的构造函数，则进行[列表初始化](#列表初始化)。

值初始化的效果：

> 1. 如果T没有默认构造函数（或被删除），或拥有非平凡的默认构造函数，则进行[默认初始化](#默认初始化)。
> 2. 如果T具有合成构造函数，则进行[零初始化](#零初始化)。
> 3. 如果T是数组类型，则[值初始化](#值初始化)数组所有元素。
> 4. 否则，[零初始化](零初始化)对象。

#### 直接初始化

从明确的构造函数实参列表初始化对象。

直接初始化其可能在以下情况进行：

>   1.   非空带括号列表初始化，如`T t(...)`。
>   2.   使用非空花括号初始化器初始化非类类型对象（对于类类型对象，进行[列表初始化](#列表初始化)），如`T t{...}`。
>   3.   使用函数式转型或带括号的表达式列表初始化纯右值，如`T(...)`。
>   4.   













#### 默认初始化

以下情况进行默认初始化：

> 1. 不带初始化器创建的对象，如：`T t`，`new T`。

默认初始化的效果：

> 1. 如果T是类类型，对空实参列表的构造函数进行重载决议，并调用进行初始化。
> 2. 如果T是数组类型，则默认初始化所有元素。
> 3. 否则，不做任何事情（具有自动存储期的对象初始化为不确定值）。

###### const对象的默认初始化

对于const对象的默认初始化，需要T满足const可默认构造，即以下条件：

>   1.   T的所有非静态数据成员m都拥有默认成员初始化器，或者m为const可默认构造。
>
>   2.   T的所有非静态数据联合体成员，刚好有一个变体成员拥有默认成员初始化器。
>
>        ```cpp
>        struct S { S() = delete; };
>        
>        struct T1 {
>        	union {
>        		S s;
>        		int i{ 0 };
>        	}m;
>        };
>        
>        struct T2 {
>        	union {
>        		S s;
>        		int i;
>        	}m;
>        };
>        
>        auto main() -> int {
>        
>        	const T1 t1;
>        	const T2 t2;	// error
>        
>        	return 0;
>        }
>        ```
>
>   3.   T的基类均为const可默认构造。

#### 零初始化

以下情况进行零初始化：

>   1.   没有显示常量初始化的静态或线程局部生命周期的对象，如`static T t`。

零初始化的效果：

>   1.   如果T是标量类型，那么其值为0显示转换到T的值。
>   2.   如果T是非联合体类类型，那么：
>        *   初始化所有填充位为0。
>        *   零初始化所有非静态数据成员。
>        *   



