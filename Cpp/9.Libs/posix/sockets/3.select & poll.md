#### select
`select(nfds, readfds, writefds, exceptfds, timeout)`，当文件描述符集合中存在描述符发生指定事件，或者超时后，返回。如果有事件，返回描述符数量；如果超时，返回0；否则返回-1。
* nfds。表示所有描述符集合中，最大的描述符。将该参数设置为合理的值，可以提高效率。该值不应该超过 `FD_SETSIZE`。
* xxxfds。当对某个事件不感兴趣时，可以将其设置为空指针。事实上，将三个参数均设置为空指针后，将得到比 `sleep()` 精度更高的定时器。
* timeout。timeout设置为空指针，此时会阻塞直到存在描述符发生指定事件，或产生错误。

###### fd_set
`fd_set` 存储描述符集合，可以理解为一个大整数，整数的每个二进制位对应一个描述符是否有效，因此 `fd_set` 可表示的描述符范围是有限的，为 `FD_SETSIZE`，通常定义为1024。
```cpp
struct fd_set {
    long fds_bits[FD_SETSIZE / sizeof(long)];
};
```
标准定义了相关宏，对 `fd_set` 进行操作：
* `FD_ZERO(set)`，清空描述符集合。
* `FD_SET(fd, set)`，添加描述符。
* `FD_CLR(fd, set)`，删除描述符。
* `FD_ISSET(fd, set)`，描述符是否在集合中。

#### poll
`poll(fdarray, nfds, timeout)`，监听描述符数组中的对应事件，如果有就绪描述符，返回其数量，若超时返回0，否则返回-1。

###### poolfd
```cpp
struct pollfd {
    int fd;            /* File descriptor to poll.  */
    short int events;  // 等待监听的事件，传入参数
    short int revents; // 实际发生的事件，传出参数
};
```
常用的事件标志有:
* `POLLIN`，描述符可读，可作为传入、传出标志。
* `POLLOUT`，描述符可写，可作为传入、传出标志。
* `POLLERR`，描述符发生错误，只作为传出标志。

当对某个描述符的事件不感兴趣时，可以将 `fd` 设置为负数，`poll()` 将忽略，这样做可以无需频繁改变数组大小。

###### timeout
`poll()` 阻塞的毫秒数。如果为0，立即返回；如果为负，阻塞直到有就绪描述符。

#### 就绪条件
###### 可读
* 套接字接收缓冲区的数据字节数，大于等于套接字接受缓冲区的低水位标记。`SO_RCVLOWAT` 选项标记该值，默认为1。
* 套接字接收到FIN报后，可读取EOF。
* 监听套接字的已完成握手队列中的套接字数量不为0。
* 套接字中存在错误待处理。

###### 可写
* 套接字发送缓冲区中的剩余大小，大于等于套接字发送缓冲区的低水位标记。`SO_SNDLOWAT` 选项标记该值，默认为2048。
* 套接字发送FIN报后，写操作产生SIGPIPE信号。
* 非阻塞套接字，连接成功或失败后。
* 套接字中存在错误待处理。