深度缓冲是由窗口系统管理的，以 16、24 或 32 位浮点的形式存储深度值。

深度测试是在片段着色器运行之后在屏幕空间中进行的。

将深度掩码设置为 false 之后，深度缓存只读。

```cpp
glDepthMask(GL_FALSE);
```

# 深度测试函数

opengl 提供 `glDepthFunc(func)` 函数控制 opengl 如何判断是否通过一个片段的深度测试。

| 函数        | 说明                                       |
| ----------- | ------------------------------------------ |
| `GL_ALWAYS` | 永远通过测试                               |
| `GL_NEVER`  | 永远不通过测试                             |
| `GL_LESS`   | 片段深度小于缓冲区深度时通过测试（默认值） |
| `GL_EQUAL`  | 片段深度等于缓冲区深度时通过测试           |

# 深度精度

深度缓冲区存储 0~1 之间的深度值，且在屏幕空间坐标中，z 值越小深度精度越高。

> 假如可视的 z 范围为 1~10，那么可能 1~3 范围对应深度缓冲区的 0~0.7，而非 0~0.3。

# 深度值

片段着色器中内置的 `gl_FragCoord` 向量的 z 值为该片段的深度缓冲值。
